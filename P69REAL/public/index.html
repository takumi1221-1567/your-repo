<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>AI秘書ロックマン</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- ============================================ -->
    <!-- メインコンテナ（全画面） -->
    <!-- ============================================ -->
    <div id="app-container">

        <!-- ============================================ -->
        <!-- 動画表示エリア -->
        <!-- ============================================ -->
        <div id="video-container">
            <!-- キャラクター動画1（メイン） -->
            <video
                id="character-video-1"
                class="character-video active"
                playsinline
                muted
                autoplay
                loop
                preload="auto"
            >
                お使いのブラウザは動画再生に対応していません。
            </video>

            <!-- キャラクター動画2（バッファ） -->
            <video
                id="character-video-2"
                class="character-video"
                playsinline
                muted
                loop
                preload="auto"
            >
                お使いのブラウザは動画再生に対応していません。
            </video>

            <!-- ローディング表示 -->
            <div id="video-loading" class="loading-overlay">
                <div class="spinner"></div>
                <p>読み込み中...</p>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- 入力エリア（スケルトン・下部固定） -->
        <!-- ============================================ -->
        <div id="input-area">
            <!-- テキスト入力欄 -->
            <div id="input-container">
                <input
                    type="text"
                    id="user-input"
                    placeholder="メッセージを入力..."
                    autocomplete="off"
                >

                <!-- マイクボタン -->
                <button id="mic-button" aria-label="音声入力">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M19 11C19 14.866 15.866 18 12 18C8.13401 18 5 14.866 5 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 18V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 22H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>

            <!-- 送信ボタン（入力時のみ表示） -->
            <button id="send-button" class="hidden" aria-label="送信">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>

        <!-- ============================================ -->
        <!-- X アカウント連携ボタン -->
        <!-- ============================================ -->
        <button id="x-connect-button" class="x-connect-btn" aria-label="X連携">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
            <span id="x-connect-text">X連携</span>
        </button>

        <!-- ============================================ -->
        <!-- モード表示インジケーター -->
        <!-- ============================================ -->
        <div id="mode-indicator">
            <span id="mode-text">装甲モード</span>
        </div>

        <!-- ============================================ -->
        <!-- ステータス表示 -->
        <!-- ============================================ -->
        <div id="status-indicator" class="hidden">
            <div class="status-dot"></div>
            <span id="status-text">応答中...</span>
        </div>

        <!-- ============================================ -->
        <!-- パスワード入力モーダル（キャストオフ用） -->
        <!-- ============================================ -->
        <div id="password-modal" class="modal hidden">
            <div class="modal-content">
                <h2>パスワードを入力してください</h2>
                <input
                    type="password"
                    id="password-input"
                    placeholder="214200"
                    maxlength="6"
                    inputmode="numeric"
                >
                <div class="modal-buttons">
                    <button id="password-submit" class="btn-primary">確認</button>
                    <button id="password-cancel" class="btn-secondary">キャンセル</button>
                </div>
                <p class="hint">音声入力も可能です</p>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- メッセージ送信先選択モーダル -->
        <!-- ============================================ -->
        <div id="send-target-modal" class="modal hidden">
            <div class="modal-content">
                <h2>送信先を選択</h2>
                <div class="button-group">
                    <button class="btn-option" data-target="line">LINE</button>
                    <button class="btn-option" data-target="slack">Slack</button>
                    <button class="btn-option" data-target="x">X (Twitter)</button>
                </div>
                <button id="send-cancel" class="btn-secondary">キャンセル</button>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- 宛名入力モーダル（LINE/Slack用） -->
        <!-- ============================================ -->
        <div id="recipient-modal" class="modal hidden">
            <div class="modal-content">
                <h2>宛名を入力</h2>
                <input
                    type="text"
                    id="recipient-input"
                    placeholder="ユーザー名を入力..."
                    autocomplete="off"
                >
                <div class="modal-buttons">
                    <button id="recipient-submit" class="btn-primary">次へ</button>
                    <button id="recipient-cancel" class="btn-secondary">キャンセル</button>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- メッセージ入力モーダル -->
        <!-- ============================================ -->
        <div id="message-modal" class="modal hidden">
            <div class="modal-content">
                <h2>メッセージを入力</h2>
                <textarea
                    id="message-input"
                    placeholder="メッセージを入力..."
                    rows="5"
                ></textarea>
                <div class="modal-buttons">
                    <button id="message-submit" class="btn-primary">送信</button>
                    <button id="message-cancel" class="btn-secondary">キャンセル</button>
                </div>
            </div>
        </div>

    </div>

    <!-- ============================================ -->
    <!-- JavaScript -->
    <!-- ============================================ -->
    <script src="/js/app.js"></script>
    <script src="/js/videoController.js"></script>
</body>
</html>
